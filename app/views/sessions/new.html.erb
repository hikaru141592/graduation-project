<% content_for :head do %>
  <%= preload_link_tag asset_path("main/login.png"), as: "image", type: "image/png" %>
  <%= preload_link_tag asset_path("main/login-logo.png"), as: "image", type: "image/png" %>
<% end %>

<% content_for :title, 'ログイン' %>

<div class="container mt-0 mt-md-5">
  <div class="row gx-4 justify-content-center align-items-md-center">
    <div class="col-12 mt-4 mt-md-0 col-md-6 mb-0 mb-md-3 me-md-5 mt-md-4" style="position: relative;">
      <%= image_tag "main/login.png",
        alt: "ログインバナー",
        class: "img-fluid mb-4 login-banner",
        width: 1114, height: 707,
        loading: "eager", decoding: "async", fetchpriority: "high",
        style: "z-index: 0;" %>
      <%= image_tag "main/login-logo.png",
        alt: "ログインバナー",
        class: "img-fluid mb-4 logo-anim",
        width: 1114, height: 707,
        loading: "eager", decoding: "async", fetchpriority: "high",
        style: "z-index: 1; position: absolute; top: 0; left: 0;"%>
    </div>

    <div class="col-12 col-md-3 mt-md-3">
      <h1 class="mb-4">ログイン</h1>

      <%= form_with url: login_path, local: true, html: { id: 'login-form', class: 'needs-validation' } do |f| %>
        <div class="mb-3">
          <%= f.label :email, 'メールアドレス', class: 'form-label' %>
          <%= f.email_field :email, name: :email, class: 'form-control', required: true, placeholder: 'example@example.com' %>
        </div>

        <div class="mb-3">
          <%= f.label :password, 'パスワード', class: 'form-label' %>
          <%= f.password_field :password, name: :password, class: 'form-control', required: true %>
        </div>

        <div class="form-check mb-3">
          <%= hidden_field_tag :remember, '0' %>
          <%= check_box_tag   :remember, '1', params[:remember] == '1', id: 'remember', class: 'form-check-input' %>
          <%= label_tag      :remember, '次回から自動ログインする', class: 'form-check-label' %>
        </div>

        <div class="d-grid mb-3">
          <%= f.submit 'ログイン', class: 'btn btn-alt btn-lg' %>
        </div>
      <% end %>

      <div class="d-grid mb-3">
        <button
          type="submit"
          form="login-form"
          formaction="<%= line_login_path %>"
          formmethod="get"
          formnovalidate
          data-turbo="false"
          class="btn btn-primary mb-3"
        >
          LINEでログイン
        </button>
      </div>
      <div class="text-center">
        <%= link_to '新規登録はこちら',
            signup_path,
            onclick: "return confirm('LINEログインを利用しない場合、LINEメッセージを利用した機能がご利用できません。\\nよろしいでしょうか。')",
            class: 'btn btn-link'%>
      </div>
      <div class="text-center mb-2">
        <%= link_to 'パスワードを忘れた方はこちら', new_password_reset_path, class: 'btn btn-link' %>
      </div>
    </div>
  </div>
</div>
